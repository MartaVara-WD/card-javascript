"use strict";let number=1;const styleBlue=document.querySelector(".style-blue"),styleRed=document.querySelector(".style-red"),styleYellow=document.querySelector(".style-yellow"),colorLeftSquare=document.querySelector(".js-square"),colorName=document.querySelector(".js-name-print"),colorBackground=document.querySelector(".js-background"),colorIcons=document.querySelectorAll(".js-icon"),colorBorder=document.querySelectorAll(".js-border"),palette1=["style-blue-dark","style-blue-medium","style-blue-light","style-blue-background","style-blue-background-icon"],palette2=["style-red-dark","style-red-medium","style-red-light","style-red-background","style-red-background-icon"],palette3=["style-yellow-dark","style-yellow-medium","style-yellow-light","style-yellow-background","style-yellow-background-icon"];function checkStyle(e){userData.palette="style-blue"===e?1:"style-red"===e?2:3}function handlerStyle(e){if(iconChangeBlue(),iconChangeRed(),iconChangeYellow(),void 0!==e){checkStyle(e.currentTarget.classList.value)}1===userData.palette?(input.palette=1,changeColors(palette1),removeColors(palette2),removeColors(palette3)):2===userData.palette?(input.palette=2,changeColors(palette2),removeColors(palette1),removeColors(palette3)):3===userData.palette&&(input.palette=3,changeColors(palette3),removeColors(palette1),removeColors(palette2)),saveFormValues("palette")}function changeColors(e){colorName.classList.add(e[0]),colorLeftSquare.classList.add(e[1]),colorBackground.classList.add(e[3]);for(const t of colorIcons)t.classList.add(e[0]);for(const t of colorBorder)t.classList.add(e[2])}function removeColors(e){colorName.classList.remove(e[0]),colorLeftSquare.classList.remove(e[1]),colorBackground.classList.remove(e[3]);for(const t of colorIcons)t.classList.remove(e[0]);for(const t of colorBorder)t.classList.remove(e[2])}styleBlue.addEventListener("click",handlerStyle),styleRed.addEventListener("click",handlerStyle),styleYellow.addEventListener("click",handlerStyle);const allInput=document.querySelectorAll(".js-input"),input={name:document.querySelector(".js-name"),phone:document.querySelector(".js-phone"),job:document.querySelector(".js-job"),email:document.querySelector(".js-email"),linkedin:document.querySelector(".js-linkedin"),github:document.querySelector(".js-github"),palette:1};let print={phone:document.querySelector(".js-phone-icon"),name:document.querySelector(".card__top__title__name"),job:document.querySelector(".card__top__title__role"),email:document.querySelector(".js-email-icon"),linkedin:document.querySelector(".js-linkedin-print"),github:document.querySelector(".js-github-print")},userData={},recoverData="";function saveFormValues(e){return userData[e]="palette"!==e?input[e].value:input[e],localStorage.setItem("userData",JSON.stringify(userData)),userData[e]}function sendUserData(e){if("name"!==e&&"job"!==e||0===userData[e].length)if("name"===e&&0===userData[e].length)print[e].innerHTML="Nombre Apellido";else if("job"===e&&0===userData[e].length)print[e].innerHTML="Front-end developer";else if("phone"===e)print[e].hef="tel:"+userData[e];else if("email"===e)print[e].setAttribute("href","mailto:"+userData[e]);else if("linkedin"===e)print[e].setAttribute("href","https://www.linkedin.com/in/"+userData[e]);else if("github"===e)print[e].setAttribute("href","https://github.com/"+userData[e]);else if("photo"===e&&""!==userData[e]){writeLocalImage(userData[e])}else handlerStyle();else print[e].innerHTML=userData[e]}function printUserData(e){const t=e.currentTarget.id;saveFormValues(t),sendUserData(t,userData),buttonActive()}function storageData(){if(recoverData=JSON.parse(localStorage.getItem("userData")),0!==recoverData)for(let e of Object.keys(recoverData))"photo"!==e&&"palette"!==e?(input[e].value=recoverData[e],userData[e]=recoverData[e]):"photo"===e?userData[e]=recoverData[e]:(userData[e]=recoverData[e],tickPalette()),sendUserData(e);buttonActive()}function tickPalette(){3===userData.palette?document.querySelector(".js-input-yellow").checked=!0:2===userData.palette?document.querySelector(".js-input-red").checked=!0:document.querySelector(".js-input-blue").checked=!0}document.addEventListener("DOMContentLoaded",storageData);const resetButton=document.querySelector(".js-reset-button"),form=document.querySelector(".js-form");function resetForm(){form.reset();for(let e of Object.keys(userData))userData[e]="";localStorage.setItem("userData",JSON.stringify(userData)),changeColors(palette1),removeColors(palette2),removeColors(palette3),print.name.innerHTML="Nombre Apellido",print.job.innerHTML="Front-end developer",localStorage.setItem("userData",JSON.stringify(userData)),document.querySelector(".js__profile-image").removeAttribute("style"),document.querySelector(".js__profile-preview").removeAttribute("style"),buttonCard.classList.remove("inactive"),buttonTwitter.classList.add("hidden"),iconChangeBlue(),iconChangeRed(),iconChangeYellow()}function createEvent(){for(let e of allInput)e.addEventListener("keyup",printUserData)}resetButton.addEventListener("click",resetForm),createEvent();const buttonCard=document.querySelector(".js-share"),buttonTwitter=document.querySelector(".js-twitter"),buttonContainer=document.querySelector(".form__share__button"),url=document.querySelector(".js-twitter-url"),twitterButton=document.querySelector(".twitter-link");function getJSONFromInputs(e){return e.reduce((function(e,t){return"BUTTON"!==t.nodeName&&(e[t.name]=t.value),e}),{})}function loadPhoto(){let e=document.querySelector("#img-selector").files[0];fr.addEventListener("load",sendData),fr.readAsDataURL(e)}function sendData(){let e=getJSONFromInputs(userData);e.photo=fr.result,sendRequest(e)}function createCard(e){buttonCard.classList.remove("active"),buttonCard.classList.add("inactive"),buttonTwitter.classList.remove("hidden"),console.log(userData),showURL()}function showURL(e){if(console.log(e),e.success){const t="✨Echa un vistazo a mi tarjeta de visita Sailor Code ✨ ";url.innerHTML=`${e.cardURL}<a href="${e.cardURL}" target="_blank" ></a>`,url.setAttribute("href",""+e.cardURL),twitterButton.setAttribute("href",`https://twitter.com/intent/tweet?text=${t}&url=${e.cardURL}`),createCard()}else url.innerHTML="ERROR:"+e.error}buttonCard.addEventListener("click",(function(e){e.preventDefault(),fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(userData),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){showURL(e)})).catch((function(e){console.log(e)}))}));const click=document.querySelector(".click"),section=document.querySelector(".colors-container"),arrowDown=document.querySelector(".moonicondown"),arrowUp=document.querySelector(".mooniconup");function displayArrow(e){e.preventDefault(),section.classList.toggle("hidden"),arrowUp.classList.toggle("hidden"),arrowDown.classList.toggle("hidden")}click.addEventListener("click",displayArrow);const click2=document.querySelector(".click2"),section2=document.querySelector(".form__section__signup"),arrowDown2=document.querySelector(".moonicondown2"),arrowUp2=document.querySelector(".mooniconup2");function displayArrow2(e){e.preventDefault(),section2.classList.toggle("hidden"),arrowUp2.classList.toggle("hidden"),arrowDown2.classList.toggle("hidden")}click2.addEventListener("click",displayArrow2);const click3=document.querySelector(".click3"),section3=document.querySelector(".form__share__button"),arrowDown3=document.querySelector(".moonicondown3"),arrowUp3=document.querySelector(".mooniconup3");function displayArrow3(e){e.preventDefault(),section3.classList.toggle("hidden"),arrowUp3.classList.toggle("hidden"),arrowDown3.classList.toggle("hidden")}click3.addEventListener("click",displayArrow3);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,userData.photo=fr.result,localStorage.setItem("userData",JSON.stringify(userData))}function fakeFileClick(e){e.preventDefault(),fileField.click()}function writeLocalImage(e){profileImage.style.backgroundImage=`url(${e})`,profilePreview.style.backgroundImage=`url(${e})`}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const inputBlue=document.querySelector(".js-input-blue"),inputRed=document.querySelector(".js-input-red"),inputYellow=document.querySelector(".js-input-yellow"),colorIconBackgroundMail=document.querySelector(".js-background-email"),colorIconBackgroundPhone=document.querySelector(".js-background-phone"),colorIconBackgroundLinkedin=document.querySelector(".js-background-linkedin"),colorIconBackgroundGithub=document.querySelector(".js-background-github");function iconChangeBlue(){let e=input.email.value,t=input.github.value,o=input.phone.value,n=input.linkedin.value;0!==e.length&&inputBlue.checked?colorIconBackgroundMail.classList.add("style-blue-background-icon"):colorIconBackgroundMail.classList.remove("style-blue-background-icon"),0!==t.length&&inputBlue.checked?colorIconBackgroundGithub.classList.add("style-blue-background-icon"):colorIconBackgroundGithub.classList.remove("style-blue-background-icon"),0!==n.length&&inputBlue.checked?colorIconBackgroundLinkedin.classList.add("style-blue-background-icon"):colorIconBackgroundLinkedin.classList.remove("style-blue-background-icon"),0!==o.length&&inputBlue.checked?colorIconBackgroundPhone.classList.add("style-blue-background-icon"):colorIconBackgroundPhone.classList.remove("style-blue-background-icon")}function iconChangeYellow(){let e=input.email.value,t=input.github.value,o=input.phone.value,n=input.linkedin.value;0!==e.length&&inputYellow.checked?colorIconBackgroundMail.classList.add("style-yellow-background-icon"):colorIconBackgroundMail.classList.remove("style-yellow-background-icon"),0!==t.length&&inputYellow.checked?colorIconBackgroundGithub.classList.add("style-yellow-background-icon"):colorIconBackgroundGithub.classList.remove("style-yellow-background-icon"),0!==n.length&&inputYellow.checked?colorIconBackgroundLinkedin.classList.add("style-yellow-background-icon"):colorIconBackgroundLinkedin.classList.remove("style-yellow-background-icon"),0!==o.length&&inputYellow.checked?colorIconBackgroundPhone.classList.add("style-yellow-background-icon"):colorIconBackgroundPhone.classList.remove("style-yellow-background-icon")}function iconChangeRed(){let e=input.email.value,t=input.github.value,o=input.phone.value,n=input.linkedin.value;0!==e.length&&inputRed.checked?colorIconBackgroundMail.classList.add("style-red-background-icon"):colorIconBackgroundMail.classList.remove("style-red-background-icon"),0!==t.length&&inputRed.checked?colorIconBackgroundGithub.classList.add("style-red-background-icon"):colorIconBackgroundGithub.classList.remove("style-red-background-icon"),0!==n.length&&inputRed.checked?colorIconBackgroundLinkedin.classList.add("style-red-background-icon"):colorIconBackgroundLinkedin.classList.remove("style-red-background-icon"),0!==o.length&&inputRed.checked?colorIconBackgroundPhone.classList.add("style-red-background-icon"):colorIconBackgroundPhone.classList.remove("style-red-background-icon")}function iconChangeGeneral(){iconChangeBlue(),iconChangeRed(),iconChangeYellow()}function buttonActive(){let e=input.name.value,t=input.job.value,o=input.email.value,n=input.github.value,r=input.phone.value,l=input.linkedin.value;0!==e.length&&0!==t.length&&0!==o.length&&0!==n.length&&0!==r.length&&0!==l.length&&(buttonCard.classList.toggle("active"),buttonCard.classList.toggle("inactive"))}input.email.addEventListener("keyup",iconChangeGeneral),input.github.addEventListener("keyup",iconChangeGeneral),input.linkedin.addEventListener("keyup",iconChangeGeneral),input.phone.addEventListener("keyup",iconChangeGeneral);